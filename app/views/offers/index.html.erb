<div class="container py-4 mb-2 mb-sm-0 pb-sm-5">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="row">
        <% @offers.each do |offer| %>
          <div class="col-4 mb-5">
            <div class="card" style="min-height:300px">
              <div class="card-header">
                <div class="card-title">
                  <%= image_tag offer.logo, width: "100px" if offer.logo %>
                  <span class="p-right text-right">
                    <h4><%= link_to offer.name, offer.website, target: "_blank" %></h4>
                    <% if current_user %>
                      <% result = current_user.fetch_history_status(offer.id) %>
                      <span class="text-<%= get_status_color(result[:id]) %>"><%= result[:text].upcase %></span>
                    <% end %>
                    <br />
                    <span><span class="text-info"><%= offer.reward.to_i %></span> XP</span>
                    <br />
                    <span><%= offer.display_num %></span>
                  </span>
                </div>
              </div>
              <div class="card-body">
                <p class="card-text"><%= offer.desc %></p>
                <div class="p-bottom">
                  <% if current_user %>
                    <% h = current_user.fetch_history(offer.id) %>
                    <%= link_to t("views.action.take"), take_offer_path(offer), class: "btn btn-success takeBtn", method: :put if h.nil? %>
                    <%= link_to t("views.action.complete"), "#", class: "btn btn-primary completeBtn", data: {id: offer.id, name: offer.name} if h && h.taken? %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
    <div class="paginationBox p-4">
      <%= paginate @offers %>
    </div>
  </div>
</div>